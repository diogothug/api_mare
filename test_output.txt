
> marine-data-api@1.0.0 test
> jest --verbose --coverage src/tests/unit/TabuaDeMaresScraper.test.ts

  console.log
    Script Content: 
                            gm.coef_inicio=37;
                            gm.mareas_x[0]=120; // 02:00
                            gm.mareas_y[0]=0.5;
                            gm.mareas_x[1]=400; // 06:40
                            gm.mareas_y[1]=2.5;
                            gm.altura_media=1.5;
                            var JS_FECHA_ACTUAL="2026-01-12+12%3A00";

      at TabuaDeMaresScraper.log [as parseHtml] (src/services/scrapers/TabuaDeMaresScraper.ts:42:17)

  console.error
    Error fetching tides from https://tabuademares.com/br/bahia/velha-boipeba: RangeError: Invalid time value
        at Date.toISOString (<anonymous>)
        at TabuaDeMaresScraper.toISOString [as parseHtml] (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\src\services\scrapers\TabuaDeMaresScraper.ts:98:32)
        at TabuaDeMaresScraper.parseHtml [as getTides] (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\src\services\scrapers\TabuaDeMaresScraper.ts:23:25)
        at Object.<anonymous> (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\src\tests\unit\TabuaDeMaresScraper.test.ts:37:23)

    [0m [90m 23 |[39m             [36mreturn[39m [36mthis[39m[33m.[39mparseHtml(html)[33m;[39m
     [90m 24 |[39m         } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 25 |[39m             console[33m.[39merror([32m`Error fetching tides from ${url}:`[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 26 |[39m             [36mthrow[39m error[33m;[39m
     [90m 27 |[39m         }
     [90m 28 |[39m     }[0m

      at TabuaDeMaresScraper.error [as getTides] (src/services/scrapers/TabuaDeMaresScraper.ts:25:21)
      at Object.<anonymous> (src/tests/unit/TabuaDeMaresScraper.test.ts:37:23)

  console.error
    Error fetching tides from https://tabuademares.com/br/bahia/unknown: Error: Network Error
        at Object.<anonymous> (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\src\tests\unit\TabuaDeMaresScraper.test.ts:52:43)
        at Promise.finally.completed (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
        at _callCircusTest (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
        at _runTest (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
        at C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\node_modules\jest-circus\build\jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
        at run (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
        at jestAdapter (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\node_modules\jest-circus\build\runner.js:101:19)
        at runTestInternal (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\node_modules\jest-runner\build\index.js:275:16)
        at runTest (C:\Users\diogo\.gemini\antigravity\scratch\marine-data-api\node_modules\jest-runner\build\index.js:343:7)

    [0m [90m 23 |[39m             [36mreturn[39m [36mthis[39m[33m.[39mparseHtml(html)[33m;[39m
     [90m 24 |[39m         } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 25 |[39m             console[33m.[39merror([32m`Error fetching tides from ${url}:`[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 26 |[39m             [36mthrow[39m error[33m;[39m
     [90m 27 |[39m         }
     [90m 28 |[39m     }[0m

      at TabuaDeMaresScraper.error [as getTides] (src/services/scrapers/TabuaDeMaresScraper.ts:25:21)
      at Object.<anonymous> (src/tests/unit/TabuaDeMaresScraper.test.ts:54:9)

------------------------|---------|----------|---------|---------|-------------------
File                    | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
------------------------|---------|----------|---------|---------|-------------------
All files               |      75 |    42.85 |     100 |   76.08 |                   
 TabuaDeMaresScraper.ts |      75 |    42.85 |     100 |   76.08 | 36-38,49,105-117  
------------------------|---------|----------|---------|---------|-------------------
